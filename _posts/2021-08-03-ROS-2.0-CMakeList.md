---
title:  "CMakeLists.txt의 기본 내용"
excerpt: "CMakeLists.txt의 내용과 구성, 기능, 작성방법 등에 대해 알아보자"
toc: true
toc_sticky: true

categories:
  - ROS 2.0
tags:
  - ROS 2.0
  - CMakeLists
last_modified_at: 2021-08-03T21:20:00
---

## 0. 참고 문헌
*- [CmakeLists.txt ros wiki page](http://wiki.ros.org/catkin/CMakeLists.txt)*

*- [CMake Main page](https://cmake.org/)*

*- [Migration Guide from ROS 1.0 to ROS 2.0](https://docs.ros.org/en/foxy/Contributing/Migration-Guide.html)*

## 1. CMakeLists.txt란?

해당 페이지는 ROS 1.0의 CMakeLists.txt와 비교하며, ROS 2.0의 CMakeLists.txt의 특징과 세부사항에대해 기술하였다.

## 3. CMake 버전
패키지를 빌드하기 위해 최소로 필요한 CMake 버전을 입력한다. ROS 1.0의 catkin에서는 최소 2.8.3 이상을 필요로 하며, ROS 2.0에서는 그보다 더 높은 버전인 3.5.0 버전을 사용한다.
```bash
# ROS 1.0
cmake_minimum_required(VERSION 2.8.3)
# ROS 2.0
cmake_minimum_required(VERSION 3.5.0)
```

## 4. Package Name
패키지 명을 project 함수를 통해 전달한다. 현재 패키지의 폴더 명과 동일해야 한다.
```bash
project([PACKAGE_NAME])
```

## 5. Set C++ version

해당 명령은 ROS 1.0보다는 ROS 2.0 버전에서 고려되는 점으로, ROS 2.0은 최소 C++ 14 standard 를 기반으로 하기 때문에, 컴파일러가 C++ 14 또는 그 이상의 버전으로 컴파일하도록 설정해주어야 한다.
다음은 C++ 14 standard로 컴파일되도록 설정하는 부분이다.
```bash
if(NOT CMAKE_CXX_STANDARD)
  set(CMAKE_CXX_STANDARD 14)
endif()
if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")
  add_compile_options(-Wall -Wextra -Wpedantic)
endif()
```

## 6. 빌드에 필요한 CMake 패키지 찾기
find_package 함수를 이용하여 패키지 빌드를 위해 필요한 다른 의존 패키지들을 입력한다.

ROS 1.0의 경우 catkin 패키지가 필요하므로 항상 catkin 패키지를 추가해야 한다.
```bash
find_package(catkin REQUIRED)
```

또한 COMPONENTS 인자를 통해 해당 패키지에서 가져올 부분을 다음 예시처럼 명시해주어야 한다.
```bash
find_package(catkin REQUIRED COMPONENTS
  gazebo_ros
  roscpp
  std_msgs
  message_generation
  sensor_msgs
  geometry_msgs
  tf
)
```

ROS 2.0의 경우 ament_cmake 패키지를 통해 빌드되므로, ament_cmake 패키지를 추가한다.
```bash
find_package(ament_cmake REQUIRED)
```

또한, ROS 2.0의 경우, ROS 1.0과 다르게 COMPONENTS 인자를 사용하지 않고, 각각의 패키지들을 다음 예시처럼 find_package 함수로 명시해주어야 한다.
```bash
find_package(ament_cmake REQUIRED)
find_package(gazebo REQUIRED)
find_package(gazebo_ros_pkgs REQUIRED)
find_package(geometry_msgs REQUIRED)
find_package(nav_msgs REQUIRED)
find_package(rclcpp REQUIRED)
find_package(sensor_msgs REQUIRED)
find_package(tf2 REQUIRED)
```

그 이외의 추가적으로 필요한 다른 의존성 패키지들을 추가하면 된다.

## 7. catkin_package()

수정 및 추가 작성 중